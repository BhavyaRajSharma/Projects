import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import java.util.concurrent.TimeUnit;

public class AutomateLogin {
    public static void loginToGmail(WebDriver driver){
        driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
        driver.findElement(By.id("identifierId")).sendKeys("sharmapriyam010100@gmail.com", Keys.ENTER);
        WebDriverWait wait=new WebDriverWait(driver, 5);
        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
        WebElement element = wait.until(
                ExpectedConditions.visibilityOfElementLocated(By.id("password")));
        driver.findElement(By.xpath("//input[@name='password']")).sendKeys("Priyam@sharma_2021",Keys.ENTER);
    }
    private static WebDriver getConnection(){
        WebDriver driver = null;
        try {
            System.setProperty("webdriver.gecko.driver","D:\\myFolder\\ExtraStuff\\geckodriver-v0.30.0-win64\\geckodriver.exe");
            driver = new FirefoxDriver();
        }
        catch(Exception ex) {
            ex.printStackTrace();
            System.out.println("Error in getting driver -> "+ex.getLocalizedMessage());
        }
        return driver;
    }
    private static void closeConnection(WebDriver driver){
        driver.quit();
    }
    public static void main(String[] args) {
        WebDriver driver=getConnection();
        subscribeToYTChannel(driver,"https://www.youtube.com/channel/UCbT6Mzhb4s9cFJBAlROPMVA");
//        unSubscribeToYTChannel(driver,"https://www.youtube.com/channel/UCbT6Mzhb4s9cFJBAlROPMVA");
        closeConnection(driver);
    }
    public static void subscribeToYTChannel(WebDriver driver, String channelURL){
        driver.get(channelURL);
        driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
        WebDriverWait wait1=new WebDriverWait(driver, 5);
        WebElement element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/div[1]/ytd-page-manager[1]/ytd-browse[1]/div[3]/ytd-c4-tabbed-header-renderer[1]/tp-yt-app-header-layout[1]/div[1]/tp-yt-app-header[1]/div[2]/div[2]/div[1]/div[1]/div[1]/div[2]/div[4]/ytd-button-renderer[1]/a[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
        element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/ytd-popup-container[1]/tp-yt-iron-dropdown[1]/div[1]/ytd-modal-with-title-and-button-renderer[1]/div[1]/ytd-button-renderer[1]/a[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
        loginToGmail(driver);
        element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/div[1]/ytd-page-manager[1]/ytd-browse[1]/div[3]/ytd-c4-tabbed-header-renderer[1]/tp-yt-app-header-layout[1]/div[1]/tp-yt-app-header[1]/div[2]/div[2]/div[1]/div[1]/div[1]/div[2]/div[4]/ytd-subscribe-button-renderer[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
    }
    public static void unSubscribeToYTChannel(WebDriver driver, String channelURL){
        driver.get(channelURL);
        driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
        WebDriverWait wait1=new WebDriverWait(driver, 5);
        WebElement element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/div[1]/ytd-page-manager[1]/ytd-browse[1]/div[3]/ytd-c4-tabbed-header-renderer[1]/tp-yt-app-header-layout[1]/div[1]/tp-yt-app-header[1]/div[2]/div[2]/div[1]/div[1]/div[1]/div[2]/div[4]/ytd-button-renderer[1]/a[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
        element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/ytd-popup-container[1]/tp-yt-iron-dropdown[1]/div[1]/ytd-modal-with-title-and-button-renderer[1]/div[1]/ytd-button-renderer[1]/a[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
        loginToGmail(driver);
        element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/div[1]/ytd-page-manager[1]/ytd-browse[1]/div[3]/ytd-c4-tabbed-header-renderer[1]/tp-yt-app-header-layout[1]/div[1]/tp-yt-app-header[1]/div[2]/div[2]/div[1]/div[1]/div[1]/div[2]/div[4]/ytd-subscribe-button-renderer[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
        element1 = wait1.until(
                ExpectedConditions.visibilityOfElementLocated(By.xpath("/html[1]/body[1]/ytd-app[1]/ytd-popup-container[1]/tp-yt-paper-dialog[1]/yt-confirm-dialog-renderer[1]/div[2]/div[1]/yt-button-renderer[2]/a[1]/tp-yt-paper-button[1]/yt-formatted-string[1]")));
        element1.click();
    }
}
